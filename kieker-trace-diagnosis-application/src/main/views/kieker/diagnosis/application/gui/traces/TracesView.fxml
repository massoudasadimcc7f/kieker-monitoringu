<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.cell.*?>
<?import jfxtras.scene.control.*?>
<?import kieker.diagnosis.application.gui.components.treetable.*?>

<GridPane fx:id="view" xmlns:fx="http://javafx.com/fxml"
	AnchorPane.bottomAnchor="0.0" AnchorPane.topAnchor="0.0"
	AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">

	<vgap>10</vgap>

	<TitledPane GridPane.rowIndex="0" text="%filter">
		<VBox>
			<spacing>10</spacing>
		
			<HBox>
				<spacing>10</spacing>
			
				<fx:define>
					<ToggleGroup fx:id="togglegroup" />
				</fx:define>
			 
				<RadioButton text="%TracesView.btnShowAll.text" fx:id="ivShowAllButton" selected="true" toggleGroup="$togglegroup" onAction="#useFilter" />
				<RadioButton text="%showJustSuccessful" fx:id="ivShowJustSuccessful" toggleGroup="$togglegroup" onAction="#useFilter" />
				<RadioButton text="%TracesView.btnShowJustFailed.text" fx:id="ivShowJustFailedButton" toggleGroup="$togglegroup" onAction="#useFilter" />	
				<RadioButton text="%TracesView.showJustFailureContaining.text" fx:id="ivShowJustFailureContainingButton"  toggleGroup="$togglegroup" onAction="#useFilter" />	
			</HBox>
		
			<GridPane>
				<hgap>5</hgap>
				<vgap>5</vgap>
				
				<TextField promptText="%filterContainer" onAction="#useFilter" fx:id="ivFilterContainer" GridPane.columnIndex="0" GridPane.hgrow="ALWAYS"/>
				<TextField promptText="%filterComponent" onAction="#useFilter" fx:id="ivFilterComponent" GridPane.columnIndex="1" GridPane.hgrow="ALWAYS"/>
				<TextField promptText="%filterOperation" onAction="#useFilter" fx:id="ivFilterOperation" GridPane.columnIndex="2" GridPane.hgrow="ALWAYS"/>
				<TextField promptText="%filterException" onAction="#useFilter" fx:id="ivFilterException" GridPane.columnIndex="3" GridPane.hgrow="ALWAYS"/>
				<TextField promptText="%filterTraceID" onAction="#useFilter" fx:id="ivFilterTraceID" GridPane.columnIndex="4" GridPane.hgrow="ALWAYS"/>
				
				<DatePicker promptText="%filterLowerDate" onAction="#useFilter" fx:id="ivFilterLowerDate" GridPane.rowIndex="1" GridPane.columnIndex="0" GridPane.hgrow="ALWAYS" maxWidth="Infinity"/>
				<CalendarTimeTextField promptText="%filterLowerTime" onKeyReleased="#useFilter" fx:id="ivFilterLowerTime"  GridPane.rowIndex="1" GridPane.columnIndex="1" GridPane.hgrow="ALWAYS"/>
				<DatePicker promptText="%filterUpperDate" onAction="#useFilter" fx:id="ivFilterUpperDate" GridPane.rowIndex="1" GridPane.columnIndex="2" GridPane.hgrow="ALWAYS" maxWidth="Infinity"/>
				<CalendarTimeTextField promptText="%filterUpperTime" onKeyReleased="#useFilter" fx:id="ivFilterUpperTime" GridPane.rowIndex="1" GridPane.columnIndex="3" GridPane.hgrow="ALWAYS"/>
			
				<Hyperlink text="%saveAsFavorite" onAction="#saveAsFavorite" GridPane.rowIndex="2" GridPane.columnIndex="0"  />
			</GridPane>
		</VBox>
	</TitledPane>
	
	<TreeTableView fx:id="ivTreetable" GridPane.hgrow="ALWAYS"
		GridPane.vgrow="ALWAYS" GridPane.rowIndex="1" tableMenuButtonVisible="true" onMouseClicked="#selectCall" onKeyReleased="#selectCall">
		
		<rowFactory>
			<FailedRowFactory/>
		</rowFactory>
		
		<placeholder>
			<Label text="%emptyTableText"/>
		</placeholder>
		
		<columns>
			<TreeTableColumn text="%TracesView.trclmnExecutionContainer.text">
				<cellValueFactory>
					<TreeItemPropertyValueFactory
						property="container" />
				</cellValueFactory>
			</TreeTableColumn>

			<TreeTableColumn text="%TracesView.trclmnComponent.text">
				<cellValueFactory>
					<ComponentTreeCellValueFactory property="component" />
				</cellValueFactory>
			</TreeTableColumn>

			<TreeTableColumn text="%TracesView.trclmnOperation.text">
				<cellValueFactory>
					<OperationTreeCellValueFactory property="operation" />
				</cellValueFactory>
			</TreeTableColumn>

			<TreeTableColumn text="%TracesView.trclmnTraceDepth.text">
				<cellValueFactory>
					<TreeItemPropertyValueFactory
						property="stackDepth" />
				</cellValueFactory>
			</TreeTableColumn>

			<TreeTableColumn text="%TracesView.trclmnTraceSize.text">
				<cellValueFactory>
					<TreeItemPropertyValueFactory
						property="stackSize" />
				</cellValueFactory>
			</TreeTableColumn>

			<TreeTableColumn text="%TracesView.trclmnDuration.text" >
			<cellFactory>
					<DurationTreeCellFactory />
				</cellFactory>
				<cellValueFactory>
					<DurationTreeCellValueFactory
						property="duration" />
				</cellValueFactory>
			</TreeTableColumn>
			
			<TreeTableColumn text="%TracesView.trclmnPercent.text" >
			<cellFactory>
						<PercentTreeCellFactory />
				</cellFactory>
				<cellValueFactory>
					<TreeItemPropertyValueFactory
						property="percent" />
				</cellValueFactory>
			</TreeTableColumn>
			
			<TreeTableColumn text="%TracesView.trclmnTraceId.text" >
				<cellValueFactory>
					<TreeItemPropertyValueFactory
						property="traceID" />
				</cellValueFactory>
			</TreeTableColumn>
			
			<TreeTableColumn text="%TracesView.trclmnTimestamp.text" >
			<cellFactory>
					<TimestampTreeTableCellFactory />
				</cellFactory>
				<cellValueFactory>
					<TreeItemPropertyValueFactory
						property="timestamp" />
				</cellValueFactory>
			</TreeTableColumn>
		</columns>
	</TreeTableView>

	 <TitledPane GridPane.rowIndex="2" text="%properties">
	<GridPane fx:id="ivDetailpanel" >
		<TextField text="%TracesView.lblExecutionContainer.text"
			editable="false" GridPane.rowIndex="1" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="1" GridPane.columnIndex="2" fx:id="ivContainer"
			GridPane.hgrow="ALWAYS"/>

		<TextField text="%TracesView.lblComponent.text" editable="false"
			GridPane.rowIndex="2" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="2" GridPane.columnIndex="2" fx:id="ivComponent" />

		<TextField text="%TracesView.lblOperation.text" editable="false"
			GridPane.rowIndex="3" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="3" GridPane.columnIndex="2" fx:id="ivOperation" />

		<TextField text="%TracesView.lblFailed.text" editable="false"
			GridPane.rowIndex="4" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="4" GridPane.columnIndex="2" fx:id="ivFailed" />

		<TextField text="%TracesView.trclmnTraceDepth.text"
			editable="false" GridPane.rowIndex="5" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="5" GridPane.columnIndex="2" fx:id="ivTraceDepth" />

		<TextField text="%TracesView.trclmnTraceSize.text" editable="false"
			GridPane.rowIndex="6" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="6" GridPane.columnIndex="2" fx:id="ivTraceSize" />

		<TextField text="%TracesView.lblDuration.text" editable="false"
			GridPane.rowIndex="7" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="7" GridPane.columnIndex="2" fx:id="ivDuration" />

		<TextField text="%TracesView.trclmnPercent.text" editable="false"
			GridPane.rowIndex="8" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="8" GridPane.columnIndex="2" fx:id="ivPercent" />

		<TextField text="%TracesView.trclmnTraceId.text" editable="false"
			GridPane.rowIndex="9" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="9" GridPane.columnIndex="2" fx:id="ivTraceID" />

		<TextField text="%TracesView.trclmnTimestamp.text" editable="false"
			GridPane.rowIndex="10" GridPane.columnIndex="1" />
		<TextField text="N/A" GridPane.fillWidth="true" editable="false"
			GridPane.rowIndex="10" GridPane.columnIndex="2" fx:id="ivTimestamp" />

	</GridPane>
</TitledPane>
	<HBox fx:id="ivStatusbar" GridPane.rowIndex="3"  GridPane.hgrow="ALWAYS">
		<TextField text="%TracesView.lblCounter.text" editable="false" fx:id="ivCounter" HBox.hgrow="ALWAYS"/>
	</HBox>

</GridPane>